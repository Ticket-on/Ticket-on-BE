## 부하 테스트 시나리오 

-----

### 테스트 환경

부하 테스트 환경 : `EC2 t2.micro` 부터 점진적으로 사양 업그레이드  
부하 발생 환경 : ` CPU Apple M3 Pro`, `12코어` ,`메모리 18GB`



### 모니터링

Prometheus : 서버 애플리케이션 메트릭 시각화   
Tempo : 트랜잭션 트레이스 시각화  
Loki : 로그 수집, 분석   
Opentelemetry : 메트릭, 트레이스 수집  
Grafana : 통합 대시 보드 구성


### 테스트할 시나리오 

1. 대기열 접속시 TPS 를 어느정도까지 처리할 수 있는가?
2. 예약~결제까지의 트랜잭션을 어느정도의 부하까지 견딜 수 있는가?
3. 하나의 대기열 서버에서 어느정도의 요청까지 견딜 수 있는가?
4. 하나의 예약 서버에서 몇명 정도의 사용자를 관리할 수 있는가 ?
5. 구매 정보(티케팅 정보, 공연 정보) 요청 속도 측정 

### 테스트 목적  

1. 총 500,000 만명 정도의 사용자가 있을 상황에 대비한 안정적인 애플리케이션 운영  
2. 적절한 EC2 CPU 사양 찾기  
3. 예약부터 결제까지 누락되거나 정합성이 깨지지 않는지 테스트  


### 어떤 값을 모니터링 할지?

k6 : TPS, RPS, 평균/최대 응답 시간  
JVM : CPU, HEAP 사용률, Thread 개수, GC  
DB : 커넥션 수, 슬로우 쿼리 측정 후 튜닝  
